<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SolScore MVP</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>ðŸ”® SolScore</h1>

  <!-- Single Wallet Scan -->
  <h3>Single Wallet Scan</h3>
  <input id="wallet" placeholder="Enter wallet address" />
  <button onclick="scanWallet()">Scan</button>
  <div id="result" style="margin-top:20px;"></div>

  <!-- Wallet Comparison -->
  <h3>Wallet Comparison</h3>
  <input id="walletA" placeholder="Wallet A address" />
  <input id="walletB" placeholder="Wallet B address" />
  <button onclick="compareWallets()">Compare</button>
  <div id="compareResult" style="margin-top:20px;"></div>

  <script>
    async function scanWallet() {
      const wallet = document.getElementById("wallet").value;
      if (!wallet) return alert("Enter a wallet address");
      document.getElementById("result").innerText = "Scanning...";

      try {
        const res = await fetch("https://solscore.onrender.com/api/score", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ walletAddress: wallet })
        });
        const data = await res.json();
        if (data.error) return document.getElementById("result").innerText = "Error: " + data.error;

        document.getElementById("result").innerHTML = `
          <p>Wallet: ${data.wallet}</p>
          <p>Transactions: ${data.transactionCount}</p>
          <p>Score: ${data.score}/100</p>
        `;
      } catch (err) {
        document.getElementById("result").innerText = "Fetch failed: " + err.message;
      }
    }

    async function compareWallets() {
      const walletA = document.getElementById("walletA").value;
      const walletB = document.getElementById("walletB").value;
      if (!walletA || !walletB) return alert("Enter both wallet addresses");

      document.getElementById("compareResult").innerText = "Comparing...";

      try {
        const res = await fetch("https://solscore.onrender.com/api/compare", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ walletA, walletB })
        });
        const data = await res.json();
        if (data.error) return document.getElementById("compareResult").innerText = "Error: " + data.error;

        document.getElementById("compareResult").innerHTML = `
          <p>Wallet A: ${data.walletA.wallet} â†’ Score: ${data.walletA.score}</p>
          <p>Wallet B: ${data.walletB.wallet} â†’ Score: ${data.walletB.score}</p>
          <p>Winner: ${data.winner}</p>
        `;
      } catch (err) {
        document.getElementById("compareResult").innerText = "Fetch failed: " + err.message;
      }
    }
  </script>
</body>
</html>
